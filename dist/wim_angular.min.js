var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},WiM;!function(e){var t;!function(t){"use string";t.onLayerAdded="onLayerAdded",t.onLayerChanged="onLayerChanged",t.onLayerRemoved="onLayerRemoved";var n=function(e){function t(t,n,i){e.call(this),this.LayerName=t,this.layerType=n,this.style=i}return __extends(t,e),t}(e.Event.EventArgs);t.LegendLayerAddedEventArgs=n;var i=function(e){function t(t,n,i){e.call(this),this.LayerName=t,this.PropertyName=n,this.Value=i}return __extends(t,e),t}(e.Event.EventArgs);t.LegendLayerChangedEventArgs=i;var a=function(e){function t(t,n){e.call(this),this.LayerName=t,this.layerType=n}return __extends(t,e),t}(e.Event.EventArgs);t.LegendLayerRemovedEventArgs=a;var r=function(n){function a(i,a,r,s){var o=this;n.call(this,a,""),i.vm=this,this.eventManager=s,this.eventManager.AddEvent(t.onLayerAdded),this.eventManager.AddEvent(t.onLayerChanged),this.eventManager.AddEvent(t.onLayerRemoved),this.eventManager.SubscribeToEvent(t.onLayerAdded,new e.Event.EventHandler(function(e,t){o.onLayerAdded(e,t)})),this.eventManager.SubscribeToEvent(t.onLayerRemoved,new e.Event.EventHandler(function(e,t){o.onLayerRemoved(e,t)})),this.leafletData=r,this.init()}return __extends(a,n),a.prototype.initOverlays=function(e){if("agsDynamic"==e.type){var t=e.url+"/legend?f=pjson",n=new Services.Helpers.RequestInfo(t,!0);this.Execute(n).then(function(t){t.data.layers.length>0&&(e.isOpen=!0,e.layerArray=t.data.layers)},function(e){})}},a.prototype.changeBaseLayer=function(e,t){var n=this;this.baselayers.selectedlayerName=e.toString(),this.leafletData.getMap().then(function(t){n.leafletData.getLayers().then(function(n){if(!t.hasLayer(n.baselayers[e])){for(var i in n.baselayers)t.hasLayer(n.baselayers[i])&&t.removeLayer(n.baselayers[i]);t.addLayer(n.baselayers[e])}})}),t.preventDefault()},a.prototype.toggleLayer=function(e,n){var a=this.applicationLayer.layergroup[e];a.visible=!a.visible,this.eventManager.RaiseEvent(t.onLayerChanged,this,new i(e,"visible",a.visible))},a.prototype.init=function(){var e=this;this.overlays={},this.baselayers={},this.baselayers.isOpen=!0,this.applicationLayer={selectedlayerName:"Application Layers",isAvailable:!1,layergroup:{},isOpen:!1},this.leafletData.getMap().then(function(t){e.leafletData.getLayers().then(function(n){for(var i in n.baselayers)if(t.hasLayer(n.baselayers[i])){e.baselayers.selectedlayerName=i.toString();break}})})},a.prototype.onLayerAdded=function(e,t){"geojson"==t.layerType&&(this.applicationLayer.layergroup.hasOwnProperty(t.LayerName)||(this.applicationLayer.isAvailable=!0,this.applicationLayer.layergroup[t.LayerName]={visible:!0,style:t.style}))},a.prototype.onLayerRemoved=function(e,t){"geojson"==t.layerType&&this.applicationLayer.layergroup.hasOwnProperty(t.LayerName)&&delete this.applicationLayer[t.LayerName]},a.$inject=["$scope","$http","leafletData","WiM.Event.EventManager"],a}(Services.HTTPServiceBase),s=function(){function e(){this.scope={icons:"=?",autoHideOpacity:"=?",showGroups:"=?",title:"@",baseTitle:"@",overlaysTitle:"@"},this.restrict="E",this.require="^leaflet",this.transclude=!1,this.controller=r,this.template='<div ng-class="vm.layerControlExpanded ? \'angular-leaflet-control-layers-expanded\' : \'angular-leaflet-control-layers-collapsed\'" ng-click="vm.layerControlExpanded = true; $event.stopPropagation(); $event.preventDefault()" ng-init="vm.layerControlExpanded == false">    <div ng-show="vm.layerControlExpanded">        <button class="close-legend" ng-click="vm.layerControlExpanded = false; $event.stopPropagation();">Close Legend</button>        <div class="list-group">            <!-- baselayers -->            <a ng-class="!vm.baselayers.isOpen  ? \'wimLegend-list-group-item-active\': \'wimLegend-list-group-item\'" ng-click="vm.baselayers.isOpen=(vm.baselayers.isOpen) ? false : true;">                Base Maps                <i ng-class="!vm.baselayers.isOpen ? \'fa fa-chevron-up pull-right\': \'fa fa-chevron-down pull-right\'"></i>            </a>             <div ng-hide="vm.baselayers.isOpen" class="wimLegend-list-group-body">                <div class="sitebar-item" ng-repeat="(key, layer) in vm.baselayers.layergroup">                    <input type="radio" id="baselayerRadio{{$id}}" ng-checked="$parent.vm.baselayers.selectedlayerName === key.toString()" ng-value="key.toString()" /><label for="baselayerRadio{{$id}}" ng-click="vm.changeBaseLayer(key, $event)">{{layer.name}}</label>                </div>            </div>              <!-- Application Layers -->            <div ng-if="vm.applicationLayer.isAvailable">                <div ng-class="vm.applicationLayer.isOpen  ? \'wimLegend-list-group-item-active\': \'wimLegend-list-group-item\'">                    <label> {{vm.applicationLayer.selectedlayerName}}</label>                    <i ng-class="vm.applicationLayer.isOpen ? \'fa fa-chevron-up pull-right\': \'fa fa-chevron-down pull-right\'" ng-click="vm.applicationLayer.isOpen=(vm.applicationLayer.isOpen) ? false : true;"></i>                </div>                <div ng-show="vm.applicationLayer.isOpen">                    <div ng-repeat="(key, lyr) in vm.applicationLayer.layergroup">                        <input type="checkbox" id="applicationLayer{{$id}}" ng-checked="lyr.visible" ng-value="lyr.visible" />                                                <label for="applicationLayer{{$id}}" ng-click="$parent.vm.toggleLayer(key.toString(), lyr.visible)"><img ng-src={{lyr.style.imagesrc}} />{{lyr.style.displayName}}</label>                    </div>                </div>            </div>            <!-- overlays -->             <div ng-repeat="layer in vm.overlays.layergroup" ng-init="vm.initOverlays(layer)">                <div ng-if="!layer.layerParams.showOnSelector && layer.layerParams.showOnSelector !== false" ng-class="!layer.isOpen  ? \'wimLegend-list-group-item-active\': \'wimLegend-list-group-item\'">                    <input type="checkbox" id="checkbox{{$id}}" ng-checked="layer.visible" />                    <label for="checkbox{{$id}}" ng-if="!layer.layerParams.showOnSelector && layer.layerParams.showOnSelector !== false" ng-click="layer.visible = (layer.visible) ? false : true;">                        {{layer.name}}                    </label>                    <i ng-class="!layer.isOpen ? \'fa fa-chevron-up pull-right\': \'fa fa-chevron-down pull-right\'" ng-click="layer.isOpen=(layer.isOpen) ? false : true;"></i>                </div>                <div ng-hide="layer.isOpen">                    <div class="legendGroup" ng-if="layer.type == \'agsDynamic\'">                        <div ng-repeat="lyr in layer.layerArray ">                            <label>{{lyr.layerName}}</label>                            <div ng-repeat="leg in lyr.legend ">                                <img class="legendSwatch" alt="Embedded Image"                                     src="data:{{leg.contentType}};base64,{{leg.imageData}}" />                                <i>{{leg.label}}</i>                            </div>                        </div>                    </div>                </div>            </div>                    </div>    </div></div>',this.replace=!0}return e.instance=function(){return new e},e.prototype.link=function(e,t,n,i){var a=i.getLeafletScope(),r=a.layers;e.vm.overlays.layergroup=r.overlays,e.vm.baselayers.layergroup=r.baselayers,t.bind("click",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("mouseover",function(e){i.getMap().then(function(e){e.dragging.disable(),e.doubleClickZoom.disable,e.scrollWheelZoom.disable()})}),t.bind("mouseout",function(e){i.getMap().then(function(e){e.dragging.enable(),e.doubleClickZoom.enable(),e.scrollWheelZoom.enable()})})},e}();angular.module("wim_angular").directive("wimLegend",s.instance)}(t=e.Directives||(e.Directives={}))}(WiM||(WiM={})),function(){"use strict";angular.module("wim_angular",[])}();var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},WiM;!function(e){var t;!function(t){"use string";var n=function(){function e(){}return e}(),i=function(){function e(){}return e}(),a=function(t){function a(e,a){t.call(this,a,""),e.vm=this,this.gitHubIssues=new i,this.SupportTicketData=new n,this.selectedAboutTabName="about",this.selectedHelpTabName="faq",this.aboutSelected=!1,this.helpSelected=!1,this.displayMessage,this.isValid=!1}return __extends(a,t),a.prototype.uploadFile=function(e){this.SupportTicketData.attachments=e.target.files},a.prototype.submitTicket=function(t){var i=this,a="https://streamstatshelp.zendesk.com/api/v2/tickets.json ",r=angular.toJson({ticket:this.SupportTicketData}),s="marsmith@usgs.gov",o="bCkA8dLeVkzs5mTPamt1g7zv8EMKUCuTRpPkW7Ez",l={Authorization:"Basic "+btoa(s+"/token:"+o)},c=new e.Services.Helpers.RequestInfo(a,!0,e.Services.Helpers.methodType.POST,"json",r,l);this.Execute(c).then(function(e){alert("Your request has been submitted.  Your request will be addressed as soon as possible"),i.SupportTicketData=new n},function(e){})["finally"](function(){})},a.prototype.toggleHelpSelected=function(){this.helpSelected?this.helpSelected=!1:this.helpSelected=!0},a.prototype.toggleAboutSelected=function(){this.aboutSelected?this.aboutSelected=!1:this.aboutSelected=!0},a.prototype.selectAboutTab=function(e){this.selectedAboutTabName!=e&&(this.selectedAboutTabName=e)},a.prototype.selectHelpTab=function(e){this.selectedHelpTabName!=e&&(this.selectedHelpTabName=e)},a.$inject=["$scope","$http"],a}(e.Services.HTTPServiceBase),r=function(){function e(){this.scope=!0,this.restrict="E",this.controller=a,this.templateUrl="Views/about/about.html"}return e.instance=function(){return new e},e.prototype.link=function(e,t,n,i){},e}();angular.module("wim_angular").directive("wimAbout",r.instance)}(t=e.Directives||(e.Directives={}))}(WiM||(WiM={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},WiM;!function(e){var t;!function(t){"use string";t.onLayerAdded="onLayerAdded",t.onLayerChanged="onLayerChanged",t.onLayerRemoved="onLayerRemoved";var n=function(e){function t(t,n,i){e.call(this),this.LayerName=t,this.layerType=n,this.style=i}return __extends(t,e),t}(e.Event.EventArgs);t.LegendLayerAddedEventArgs=n;var i=function(e){function t(t,n,i){e.call(this),this.LayerName=t,this.PropertyName=n,this.Value=i}return __extends(t,e),t}(e.Event.EventArgs);t.LegendLayerChangedEventArgs=i;var a=function(e){function t(t,n){e.call(this),this.LayerName=t,this.layerType=n}return __extends(t,e),t}(e.Event.EventArgs);t.LegendLayerRemovedEventArgs=a;var r=function(n){function a(i,a,r,s){var o=this;n.call(this,a,""),i.vm=this,this.eventManager=s,this.eventManager.AddEvent(t.onLayerAdded),this.eventManager.AddEvent(t.onLayerChanged),this.eventManager.AddEvent(t.onLayerRemoved),this.eventManager.SubscribeToEvent(t.onLayerAdded,new e.Event.EventHandler(function(e,t){o.onLayerAdded(e,t)})),this.eventManager.SubscribeToEvent(t.onLayerRemoved,new e.Event.EventHandler(function(e,t){o.onLayerRemoved(e,t)})),this.leafletData=r,this.init()}return __extends(a,n),a.prototype.initOverlays=function(t){if("agsDynamic"==t.type){var n=t.url+"/legend?f=pjson",i=new e.Services.Helpers.RequestInfo(n,!0);this.Execute(i).then(function(e){e.data.layers.length>0&&(t.isOpen=!0,t.layerArray=e.data.layers)},function(e){})}},a.prototype.changeBaseLayer=function(e,t){var n=this;this.baselayers.selectedlayerName=e.toString(),this.leafletData.getMap().then(function(t){n.leafletData.getLayers().then(function(n){if(!t.hasLayer(n.baselayers[e])){for(var i in n.baselayers)t.hasLayer(n.baselayers[i])&&t.removeLayer(n.baselayers[i]);t.addLayer(n.baselayers[e])}})}),t.preventDefault()},a.prototype.toggleLayer=function(e,n){var a=this.applicationLayer.layergroup[e];a.visible=!a.visible,this.eventManager.RaiseEvent(t.onLayerChanged,this,new i(e,"visible",a.visible))},a.prototype.init=function(){var e=this;this.overlays={},this.baselayers={},this.baselayers.isOpen=!0,this.applicationLayer={selectedlayerName:"Application Layers",isAvailable:!1,layergroup:{},isOpen:!1},this.leafletData.getMap().then(function(t){e.leafletData.getLayers().then(function(n){for(var i in n.baselayers)if(t.hasLayer(n.baselayers[i])){e.baselayers.selectedlayerName=i.toString();break}})})},a.prototype.onLayerAdded=function(e,t){"geojson"==t.layerType&&(this.applicationLayer.layergroup.hasOwnProperty(t.LayerName)||(this.applicationLayer.isAvailable=!0,this.applicationLayer.layergroup[t.LayerName]={visible:!0,style:t.style}))},a.prototype.onLayerRemoved=function(e,t){"geojson"==t.layerType&&this.applicationLayer.layergroup.hasOwnProperty(t.LayerName)&&delete this.applicationLayer[t.LayerName]},a.$inject=["$scope","$http","leafletData","WiM.Event.EventManager"],a}(e.Services.HTTPServiceBase),s=function(){function e(){this.scope={icons:"=?",autoHideOpacity:"=?",showGroups:"=?",title:"@",baseTitle:"@",overlaysTitle:"@"},this.restrict="E",this.require="^leaflet",this.transclude=!1,this.controller=r,this.template='<div ng-class="vm.layerControlExpanded ? \'angular-leaflet-control-layers-expanded\' : \'angular-leaflet-control-layers-collapsed\'" ng-click="vm.layerControlExpanded = true; $event.stopPropagation(); $event.preventDefault()" ng-init="vm.layerControlExpanded == false">    <div ng-show="vm.layerControlExpanded">        <button class="close-legend" ng-click="vm.layerControlExpanded = false; $event.stopPropagation();">Close Legend</button>        <div class="list-group">            <!-- baselayers -->            <a ng-class="!vm.baselayers.isOpen  ? \'list-group-item-active\': \'list-group-item\'" ng-click="vm.baselayers.isOpen=(vm.baselayers.isOpen) ? false : true;">                Base Maps                <i ng-class="!vm.baselayers.isOpen ? \'fa fa-chevron-up pull-right\': \'fa fa-chevron-down pull-right\'"></i>            </a>             <div ng-hide="vm.baselayers.isOpen" class="list-group-body">                <div class="sitebar-item" ng-repeat="(key, layer) in vm.baselayers.layergroup">                    <input type="radio" id="baselayerRadio{{$id}}" ng-checked="$parent.vm.baselayers.selectedlayerName === key.toString()" ng-value="key.toString()" /><label for="baselayerRadio{{$id}}" ng-click="vm.changeBaseLayer(key, $event)">{{layer.name}}</label>                </div>            </div>              <!-- Application Layers -->            <div ng-if="vm.applicationLayer.isAvailable">                <div ng-class="vm.applicationLayer.isOpen  ? \'list-group-item-active\': \'list-group-item\'">                    <label> {{vm.applicationLayer.selectedlayerName}}</label>                    <i ng-class="vm.applicationLayer.isOpen ? \'fa fa-chevron-up pull-right\': \'fa fa-chevron-down pull-right\'" ng-click="vm.applicationLayer.isOpen=(vm.applicationLayer.isOpen) ? false : true;"></i>                </div>                <div ng-show="vm.applicationLayer.isOpen">                    <div ng-repeat="(key, lyr) in vm.applicationLayer.layergroup">                        <input type="checkbox" id="applicationLayer{{$id}}" ng-checked="lyr.visible" ng-value="lyr.visible" />                                                <label for="applicationLayer{{$id}}" ng-click="$parent.vm.toggleLayer(key.toString(), lyr.visible)"><img ng-src={{lyr.style.imagesrc}} />{{lyr.style.displayName}}</label>                    </div>                </div>            </div>            <!-- overlays -->             <div ng-repeat="layer in vm.overlays.layergroup" ng-init="vm.initOverlays(layer)">                <div ng-if="!layer.layerParams.showOnSelector && layer.layerParams.showOnSelector !== false" ng-class="!layer.isOpen  ? \'list-group-item-active\': \'list-group-item\'">                    <input type="checkbox" id="checkbox{{$id}}" ng-checked="layer.visible" />                    <label for="checkbox{{$id}}" ng-if="!layer.layerParams.showOnSelector && layer.layerParams.showOnSelector !== false" ng-click="layer.visible = (layer.visible) ? false : true;">                        {{layer.name}}                    </label>                    <i ng-class="!layer.isOpen ? \'fa fa-chevron-up pull-right\': \'fa fa-chevron-down pull-right\'" ng-click="layer.isOpen=(layer.isOpen) ? false : true;"></i>                </div>                <div ng-hide="layer.isOpen">                    <div class="legendGroup" ng-if="layer.type == \'agsDynamic\'">                        <div ng-repeat="lyr in layer.layerArray ">                            <label>{{lyr.layerName}}</label>                            <div ng-repeat="leg in lyr.legend ">                                <img class="legendSwatch" alt="Embedded Image"                                     src="data:{{leg.contentType}};base64,{{leg.imageData}}" />                                <i>{{leg.label}}</i>                            </div>                        </div>                    </div>                </div>            </div>                    </div>    </div></div>',this.replace=!0}return e.instance=function(){return new e},e.prototype.link=function(e,t,n,i){var a=i.getLeafletScope(),r=a.layers;e.vm.overlays.layergroup=r.overlays,e.vm.baselayers.layergroup=r.baselayers,t.bind("click",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("mouseover",function(e){i.getMap().then(function(e){e.dragging.disable(),e.doubleClickZoom.disable,e.scrollWheelZoom.disable()})}),t.bind("mouseout",function(e){i.getMap().then(function(e){e.dragging.enable(),e.doubleClickZoom.enable(),e.scrollWheelZoom.enable()})})},e}();angular.module("wim_angular").directive("wimLegend",s.instance)}(t=e.Directives||(e.Directives={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t=function(){function e(){this._eventHandlers=new Array}return e.prototype.subscribe=function(e){-1==this._eventHandlers.indexOf(e)&&this._eventHandlers.push(e)},e.prototype.unsubscribe=function(e){var t=this._eventHandlers.indexOf(e);-1!=t&&this._eventHandlers.splice(t,1)},e.prototype.raise=function(e,t){for(var n=0;n<this._eventHandlers.length;n++)this._eventHandlers[n].handle(e,t)},e}();e.Delegate=t}(t=e.Event||(e.Event={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"Empty",{get:function(){return new e},enumerable:!0,configurable:!0}),e}();e.EventArgs=t}(t=e.Event||(e.Event={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t=function(){function e(e){this._handler=e}return e.prototype.handle=function(e,t){this._handler(e,t)},e}();e.EventHandler=t}(t=e.Event||(e.Event={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){"use strict";function t(){return new i}var n=function(){function e(e){this._onChanged=e}return Object.defineProperty(e.prototype,"onChanged",{get:function(){return this._onChanged},enumerable:!0,configurable:!0}),e}(),i=function(){function t(){this._eventList={}}return t.prototype.AddEvent=function(t){this._eventList.hasOwnProperty(t)||(this._eventList[t]=new n(new e.Delegate))},t.prototype.SubscribeToEvent=function(e,t){this._eventList.hasOwnProperty(e)||this.AddEvent(e),this._eventList[e].onChanged.subscribe(t)},t.prototype.RaiseEvent=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=e.EventArgs.Empty),this._eventList.hasOwnProperty(t)&&this._eventList[t].onChanged.raise(n,i)},t.prototype.UnSubscribeToEvent=function(e,t){this._eventList.hasOwnProperty(e)&&this._eventList[e].onChanged.unsubscribe(t)},t}();t.$inject=[],angular.module("WiM.Event",[]).factory("WiM.Event.EventManager",t)}(t=e.Event||(e.Event={}))}(WiM||(WiM={})),Array.prototype.group||(Array.prototype.group=function(){var e=arguments[0],t={};return this.forEach(function(n){var i=n[e].toString();t.hasOwnProperty(i)?t[i].push(n):t[i]=[n]}),t}),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}),Number.prototype.toUSGSvalue||(Number.prototype.toUSGSvalue=function(){var e,t=parseFloat(this);return t>1e6&&1e7>t&&(e=1e4),t>1e5&&1e6>t&&(e=1e3),t>1e4&&1e5>t&&(e=100),t>1e3&&1e4>t&&(e=10),t>100&&1e3>t&&(e=1),100>t?Number(t.toFixed(3)):parseInt(((t+.5*e)/e).toString())*e});var WiM;!function(e){var t;!function(e){(function(){function e(e,t,n,i){this.Title=e,this.Author=t,this.imgSrc=n,this.src=i}return e.FromJSON=function(t){var n=t.hasOwnProperty("title")?t.title:"--",i=t.hasOwnProperty("author")?t.author:"",a=t.hasOwnProperty("imgeSrc")?t.imgeSrc:"",r=t.hasOwnProperty("src")?t.src:"";return new e(n,i,a,r)},e})()}(t=e.Models||(e.Models={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){(function(){function e(e,t){this.k=e,this.v=t,this.Key=e,this.Value=t}return e})()}(t=e.Models||(e.Models={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t=(function(){function e(e,t,n,i,a,r){this.name=e,this.value=t,this.code=n,this.unit=a,this.description=i,this.limits=r}return e.FromJSON=function(n){var i=n.hasOwnProperty("name")?n.name:"---",a=n.hasOwnProperty("description")?n.description:"---",r=n.hasOwnProperty("code")?n.code:"---",s=n.hasOwnProperty("unit")?n.unit:"---",o=n.hasOwnProperty("value")?n.value:-999,l=n.hasOwnProperty("limits")&&null!=n.limits?t.FromJSON(n.limits):null;return new e(i,o,r,a,s,l)},e}(),function(){function e(e,t){this.min=e,this.max=t}return e.FromJSON=function(t){var n=t.hasOwnProperty("min")?t.min:-999,i=t.hasOwnProperty("max")?t.max:-999;return new e(n,i)},e}())}(t=e.Models||(e.Models={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.Latitude=e,this.Longitude=t,this.crs=n}return e.prototype.ToEsriString=function(){return"{"+"x:{0},y:{1}".format(this.Longitude.toString(),this.Latitude.toString())+"}"},e.FromJson=function(t){var n=t.hasOwnProperty("Latitude")?t.Latitude:-9999,i=t.hasOwnProperty("Longitude")?t.Longitude:-9999,a=t.hasOwnProperty("wkid")?t.wkid:"---";return new e(n,i,a)},e}();e.Point=t}(t=e.Models||(e.Models={}))}(WiM||(WiM={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},WiM;!function(e){var t;!function(e){"use strict";var t=function(t){function n(e,n,i,a){t.call(this,e,i),this.User=a}return __extends(n,t),n.prototype.SetBasicAuthentication=function(t,n){var i;i=new e.Helpers.RequestInfo(t);var a;try{a=btoa(this.User.username+":"+n)}catch(r){a=this.encode(this.User.username+":"+n)}return this.$http.defaults.headers.common.Authorization="Basic "+a,this.Execute(i).then(function(e){})},n.prototype.SetTokenAuthentication=function(t,n){var i=this;try{var a=new e.Helpers.RequestInfo(t);return this.Execute(a).then(function(e){i.$http.defaults.headers.common.Authorization="token "+e.data})}catch(r){}},n.prototype.encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";try{var n="",i=NaN,a=NaN,r=NaN,s=NaN,o=NaN,l=NaN,c=NaN,u=0;do i=e.charCodeAt(u++),a=e.charCodeAt(u++),r=e.charCodeAt(u++),s=i>>2,o=(3&i)<<4|a>>4,l=(15&a)<<2|r>>6,c=63&r,isNaN(a)?l=c=64:isNaN(r)&&(c=64),n=n+t.charAt(s)+t.charAt(o)+t.charAt(l)+t.charAt(c),i=a=r=NaN,s=o=l=c=NaN;while(u<e.length);return n}catch(p){}},n}(e.HTTPServiceBase);e.AuthenticationServiceAgent=t}(t=e.Services||(e.Services={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.baseURL=t,this.$http=e}return e.prototype.Execute=function(e){return e.url=e.includesBaseURL?e.url:this.baseURL+e.url,this.$http(e)},e}();e.HTTPServiceBase=t}(t=e.Services||(e.Services={}))}(WiM||(WiM={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},WiM;!function(e){var t;!function(t){"use strict";function n(e,t,n){return new s(e,t,n)}t.onSelectedAreaOfInterestChanged="onSelectedAreaOfInterestChanged";var i=function(e){function t(t){e.call(this),this.selectedAreaOfInterest=t}return __extends(t,e),t}(e.Event.EventArgs);t.SearchAPIEventArgs=i;var a=function(){function e(e,t,n,i,a){this.Name=e,this.Category=t,this.State=n,this.Latitude=i,this.Longitude=a,this.crs="4326"}return e}(),r=function(){function e(){}return e}(),s=function(n){function s(e,i,a){n.call(this,e,configuration.baseurls.SearchAPI),this.$q=i,this.eventManager=a,this.eventManager.AddEvent(t.onSelectedAreaOfInterestChanged),this.init(),this.loadSearchAPI()}return __extends(s,n),s.prototype.loadSearchAPI=function(){var e=this,t=document.createElement("script");t.src="http://txpub.usgs.gov/DSS/search_api/1.1/api/search_api.min.js",t.onload=function(){e.setSearchAPI()},document.body.appendChild(t)},s.prototype.setSearchAPI=function(){var e=this;search_api.on("load",function(){search_api.setOpts({textboxPosition:"user-defined",theme:"user-defined",DbSearchIncludeUsgsSiteSW:!0,DbSearchIncludeUsgsSiteGW:!0,DbSearchIncludeUsgsSiteSP:!0,DbSearchIncludeUsgsSiteAT:!0,DbSearchIncludeUsgsSiteOT:!0}),search_api.on("before-search",function(){}),search_api.on("location-found",function(n){e.eventManager.RaiseEvent(t.onSelectedAreaOfInterestChanged,e,new i(new a(n.name,n.category,n.state,n.y,n.x)))}),search_api.on("no-result",function(){alert("No location matching the entered text could be found.")}),search_api.on("timeout",function(){alert("The search operation timed out.")})})},s.prototype.getLocations=function(t){var n=this;this.config.term=t;var i=new e.Services.Helpers.RequestInfo("/search");return i.params={term:this.config.term,state:this.config.state,includeGNIS:this.config.includeGNIS,useCommonGnisClasses:this.config.useCommonGnisClasses,includeUsgsSiteSW:this.config.includeUsgsSiteSW,includeUsgsSiteGW:this.config.includeUsgsSiteGW,includeUsgsSiteSP:this.config.includeUsgsSiteSP,includeUsgsSiteAT:this.config.includeUsgsSiteAT,includeUsgsSiteOT:this.config.includeUsgsSiteOT,includeZIPcodes:this.config.includeZIPcodes,includeAREAcodes:this.config.includeAREAcodes,includeState:this.config.includeState,topN:this.config.topN,debug:this.config.debug},this.Execute(i).then(function(e){return e.data.map(function(e){return new a(e.nm,e.ct,e.st,e.y,e.x)})},function(e){return n.$q.reject(e.data)})},s.prototype.init=function(){this.config=new r,this.config.includeGNIS=!0,this.config.useCommonGnisClasses=!0,this.config.includeUsgsSiteSW=!0,this.config.includeUsgsSiteGW=!0,this.config.includeUsgsSiteSP=!0,this.config.includeUsgsSiteAT=!0,this.config.includeUsgsSiteOT=!0,this.config.includeZIPcodes=!0,this.config.includeAREAcodes=!0,this.config.includeState=!0,this.config.topN=100,this.config.debug=!1,this.config.term="",this.config.state=""},s}(t.HTTPServiceBase);n.$inject=["$http","$q","WiM.Event.EventManager"],angular.module("WiM.Services").factory("WiM.Services.SearchAPIService",n)}(t=e.Services||(e.Services={}))}(WiM||(WiM={})),function(){"use strict";angular.module("WiM.Services",[])}();var WiM;!function(e){var t;!function(e){"use strict";function t(e){return new n(e)}var n=function(){function e(e){this.$rootScope=e,e.$on("$stateChangeStart",this.stateChangeStart),e.$on("$stateChangeSuccess",this.stateChangeSuccess),e.$on("$stateChangeError",this.stateChangeError),e.$on("$stateNotFound",this.stateNotFound)}return e.prototype.stateChangeStart=function(e,t,n,i,a){},e.prototype.stateChangeSuccess=function(e,t,n,i,a){},e.prototype.stateChangeError=function(e,t,n,i,a,r){},e.prototype.stateNotFound=function(e,t,n,i,a){},e}();t.$inject=["$rootScope"],angular.module("WiM.Services").factory("WiM.Services.StateWatcherService",t)}(t=e.Services||(e.Services={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t,i,a,r,s,o){void 0===t&&(t=!1),void 0===i&&(i=n.GET),void 0===a&&(a="json"),void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null),this.url=e,this.includesBaseURL=t,this.method=n[i],this.dataType=a,this.transformRequest=o,this.headers=s,this.data=r}return e}();e.RequestInfo=t,function(e){e[e.GET=0]="GET",e[e.POST=1]="POST",e[e.PUT=2]="PUT",e[e.DELETE=3]="DELETE"}(e.methodType||(e.methodType={}));var n=e.methodType}(t=e.Helpers||(e.Helpers={}))}(t=e.Services||(e.Services={}))}(WiM||(WiM={}));var WiM;!function(e){var t;!function(e){var t;!function(e){function t(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}e.paramsTransform=t}(t=e.Helpers||(e.Helpers={}))}(t=e.Services||(e.Services={}))}(WiM||(WiM={}));